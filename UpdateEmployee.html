<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Update Employee | Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-slate-950 flex items-center justify-center text-slate-100">

<div class="w-full max-w-md px-4">

  <div class="mb-5">
    <h1 class="text-xl font-semibold tracking-tight text-amber-300">Update Employee</h1>
    <p class="text-xs text-slate-400">Modify employee data and update in database.</p>
  </div>

  <div class="bg-slate-900/70 border border-slate-800 rounded-2xl shadow-xl shadow-black/40 p-5">
    
    <form class="space-y-4" onsubmit="event.preventDefault(); updatedata();">

      <div>
        <label class="block text-xs font-medium text-slate-300 mb-1">Employee ID</label>
        <input name="id" type="number"
               class="w-full rounded-lg bg-slate-950/70 border border-slate-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
        />
      </div>

      <div>
        <label class="block text-xs font-medium text-slate-300 mb-1">Name</label>
        <input name="name"
               class="w-full rounded-lg bg-slate-950/70 border border-slate-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
        />
      </div>

      <div>
        <label class="block text-xs font-medium text-slate-300 mb-1">Email</label>
        <input name="email" type="email"
               class="w-full rounded-lg bg-slate-950/70 border border-slate-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
        />
      </div>

      <div>
        <label class="block text-xs font-medium text-slate-300 mb-1">Department ID</label>
        <input name="departmentId"
               class="w-full rounded-lg bg-slate-950/70 border border-slate-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
        />
      </div>

      <button type="button" onclick="updatedata()"
              class="w-full mt-2 inline-flex items-center justify-center rounded-lg bg-gradient-to-r from-amber-500 to-yellow-500 px-4 py-2.5 text-sm font-medium shadow-lg shadow-amber-500/30 hover:from-amber-400 hover:to-yellow-400 active:scale-[0.98] transition">
        Update Employee
      </button>

    </form>

    <div class="mt-5">
      <p class="text-[11px] text-slate-400 mb-1">API Response</p>
      <pre id="p"
           class="text-xs bg-slate-950/80 border border-slate-800 rounded-lg p-3 text-slate-300 overflow-x-auto min-h-[52px]">
Waiting for update...</pre>
    </div>

    <!-- Navigation Buttons -->
    <div class="mt-6 border-t border-slate-800 pt-4 flex flex-col gap-3">

      <a href="Landingpage.html"
         class="w-full inline-flex items-center justify-center rounded-lg bg-slate-800/70 border border-slate-700 px-4 py-2 text-sm hover:bg-slate-800 transition">
        ← Back to Dashboard
      </a>

      <a href="Getallemployees.html"
         class="w-full inline-flex items-center justify-center rounded-lg bg-blue-600/90 px-4 py-2 text-sm font-medium shadow-lg shadow-blue-500/30 hover:bg-blue-500 active:scale-[0.98] transition">
        View All Employees
      </a>

    </div>

  </div>
</div>

<script>
updatedata = async function () {
    var form = document.querySelector('form');
    var object = {};
    var id = form.id.value;

    if (!id) {
      document.getElementById('p').textContent = "⚠️ Please enter Employee ID first";
      document.getElementById('p').className = "text-xs bg-slate-950/80 border border-yellow-500/70 rounded-lg p-3 text-yellow-300";
      return;
    }

    let fd = new FormData(form);
    fd.forEach(function(value, key) {
        if (key !== "id") object[key] = value;
    });

    var json = JSON.stringify(object);

    let response = await fetch(`https://localhost:7208/api/Employee/${id}`, {
        method: "put",
        headers: {
            'Content-Type': 'application/json;charset=utf-8'
        },
        body: json
    });

    if (response.ok) {
        let x = await response.json();
        document.getElementById('p').textContent = JSON.stringify(x, null, 2);
        document.getElementById('p').className = "text-xs bg-slate-950/80 border border-green-700 rounded-lg p-3 text-green-400";
    } else {
        document.getElementById('p').textContent = `❗ HTTP Error: ${response.status}`;
        document.getElementById('p').className = "text-xs bg-slate-950/80 border border-rose-600 rounded-lg p-3 text-rose-400";
    }
}
</script>

</body>
</html>

<!-- 
<!DOCTYPE html>
<html>
<body>
    <p>Update Employee</p>
    <form>
        <label>Id</label><input name="id" />
        <label>Name</label><input name="name" />
        <label>Email</label><input name="email" />
        <label>Department</label><input name="departmentId" />
        <button type="button" onclick="updatedata();">Update</button>
    </form>
    <p id="p"></p>

<script>
    updatedata = async function () {
        var form = document.querySelector('form');
        var object = {};
        var id = form.id.value;

        form = new FormData(form);
        form.forEach(function (value, key) {
            if (key !== "id") 
                object[key] = value;
        });

        var json = JSON.stringify(object);

        let response = await fetch(`https://localhost:7208/api/Employee/${id}`,
            {
                method: "put",
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: json
            }
        );

        if (response.ok) {
            let x = await response.json();
            document.getElementById('p').innerHTML = JSON.stringify(x);
        }
        else
            alert("HTTP-Error:  " + response.status);
    }
</script>

</body>
</html> -->
